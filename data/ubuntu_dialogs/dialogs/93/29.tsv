2010-01-06T04:44:00.000Z	adz		alright I am looking at /var/log/messages and /var/log/syslog and I only see stuff from this morning
2010-01-06T04:46:00.000Z	adz		Here is the problem: Today my server crashed. It does not boot up. It gets passed the GRUB screen, and then the screen goes black. When I try in recovery mode it displays messages, and then crashes when I try to log in (sometimes even before)
2010-01-06T04:46:00.000Z	adz		is tehre any way I can recover the computer?
2010-01-06T04:47:00.000Z	adz		problem is I can't get my mysql files
2010-01-06T04:47:00.000Z	adz		any way to recover those through livec
2010-01-06T04:47:00.000Z	adz		*livecd
2010-01-06T04:48:00.000Z	adz		even as root
2010-01-06T04:49:00.000Z	adz		from livecd
2010-01-06T04:50:00.000Z	mkanyicy	adz	how are you logged in your system now?
2010-01-06T04:48:00.000Z	mkanyicy	adz	they are at /var/lib/mysql
2010-01-06T04:48:00.000Z	adz	mkanyicy	gives me access denied when I do it
2010-01-06T04:48:00.000Z	mkanyicy	adz	even as root?
2010-01-06T04:49:00.000Z	adz	mkanyicy	yup
2010-01-06T04:49:00.000Z	mkanyicy	adz	what are you trying to do?
2010-01-06T04:49:00.000Z	adz	mkanyicy	I am trying to recover mysql files
2010-01-06T04:50:00.000Z	adz	mkanyicy	livecd
2010-01-06T04:50:00.000Z	mkanyicy	adz	good
2010-01-06T04:50:00.000Z	mkanyicy	adz	now did you mount the ubuntu partition already?
2010-01-06T04:51:00.000Z	mkanyicy	adz	now do you have a usb storage device connected?
2010-01-06T04:51:00.000Z	mkanyicy	adz	where is it mounted?
2010-01-06T04:52:00.000Z	mkanyicy	adz	??
2010-01-06T04:52:00.000Z	mkanyicy	adz	hahaha, that
2010-01-06T04:52:00.000Z	adz	mkanyicy	(automounted)
2010-01-06T04:52:00.000Z	mkanyicy	adz	hahaha, that's very unfriendly mount point
2010-01-06T04:53:00.000Z	adz	mkanyicy	how so
2010-01-06T04:53:00.000Z	mkanyicy	adz	tell me where do you want to put the destination files?
2010-01-06T04:54:00.000Z	mkanyicy	adz	where did you mount the ubuntu partition?
2010-01-06T04:55:00.000Z	mkanyicy	adz	but that is your nas
2010-01-06T04:55:00.000Z	mkanyicy	adz	how do you put files to the nas then?
2010-01-06T04:57:00.000Z	mkanyicy	adz	 try this "sudo tar -cvpf ~/Desktop/mysql_backup.tar /media/bcf14bf8-829e-48d2-9f3e-941173736673/var/lib/mysql"
2010-01-06T04:58:00.000Z	mkanyicy	adz	did that command do what you want?
2010-01-06T04:59:00.000Z	adz	mkanyicy	holy SHIT that worked!
2010-01-06T04:59:00.000Z	adz	mkanyicy	sorry just really happy
2010-01-06T05:00:00.000Z	adz	mkanyicy	know any utilities to make dumps from myd files
2010-01-06T05:00:00.000Z	mkanyicy	adz	what do you want to do?
2010-01-06T05:01:00.000Z	adz	mkanyicy	restore them someplace temporarily
2010-01-06T05:01:00.000Z	mkanyicy	adz	what for?
2010-01-06T05:02:00.000Z	adz	mkanyicy	make sure that I have absolutely everything intact before I wipe main server
2010-01-06T05:02:00.000Z	mkanyicy	adz	of course you have everything if you have that file]
2010-01-06T05:03:00.000Z	mkanyicy	adz	if you don't believe that install mysql in the livecd session now
2010-01-06T05:03:00.000Z	mkanyicy	adz	and extract that tar and put the files under /var/lib/mysql
2010-01-06T05:04:00.000Z	adz	mkanyicy	on the new server? because I remember something from a long time ago about that not working directly
2010-01-06T05:04:00.000Z	mkanyicy	adz	the MOST IMPORTANT thing you have to keep in mind is that the ownership and permissions of the mysql files need to be exactly like that, if they change mysql can ignore them
2010-01-06T05:05:00.000Z	adz	mkanyicy	ok I will give it a shot...
2010-01-06T05:05:00.000Z	mkanyicy	adz	if encountering probs feel free to ask me, i've been fiddling with that for years
2010-01-06T05:19:00.000Z	adz	mkanyicy	http://pastebin.com/mc5676d5
2010-01-06T05:20:00.000Z	adz	mkanyicy	that's what I got when start mysqld again
2010-01-06T05:21:00.000Z	mkanyicy	adz	what version of ubuntu are you using?
2010-01-06T05:21:00.000Z	mkanyicy	adz	"sudo service mysql restart"
2010-01-06T05:22:00.000Z	mkanyicy	adz	did you put your files in /var/lib/mysql ?
2010-01-06T05:22:00.000Z	adz	mkanyicy	fail
2010-01-06T05:23:00.000Z	adz	mkanyicy	yeah
2010-01-06T05:24:00.000Z	adz	mkanyicy	fresh install of mysql, went into /var/lib/mysql, deleted everything. then copeied over contents of tar and then started msysqld
2010-01-06T05:24:00.000Z	mkanyicy	adz	you were suppose to bring the server down first
2010-01-06T05:25:00.000Z	mkanyicy	adz	anyway, did you preserve the file ownership and permissions as I told you?
2010-01-06T05:25:00.000Z	adz	mkanyicy	erm....how exactly?
2010-01-06T05:26:00.000Z	mkanyicy	adz	ok do it like this,
2010-01-06T05:26:00.000Z	mkanyicy	adz	"sudo service mysql stop"
2010-01-06T05:26:00.000Z	mkanyicy	adz	after that "sudo rm -rfv /var/lib/mysql/*"
2010-01-06T05:27:00.000Z	mkanyicy	adz	and now "rmdir /var/lib/mysql"
2010-01-06T05:28:00.000Z	mkanyicy	adz	and now "sudo tar -xpvf ~/Desktop/mysql_backup.tar -C /var/lib"
2010-01-06T05:29:00.000Z	mkanyicy	adz	finally "sudo service mysql start"
2010-01-06T05:29:00.000Z	mkanyicy	adz	?
2010-01-06T05:30:00.000Z	adz	mkanyicy	I see a problem. It tarred the entire path
2010-01-06T05:31:00.000Z	mkanyicy	adz	can you pastebin the output of "sudo ls -lh /var/lib/mysql" ?
2010-01-06T05:31:00.000Z	adz	mkanyicy	nothing there because root of the tar was /media
2010-01-06T05:32:00.000Z	mkanyicy	adz	can you pastebin the output of "sudo ls -lh /var/lib/media" ?
2010-01-06T05:34:00.000Z	adz	mkanyicy	bcf.... with owner root and permissions drwxr-xr-x
2010-01-06T05:34:00.000Z	mkanyicy	adz	?
2010-01-06T05:34:00.000Z	adz	mkanyicy	sorry I am kinda working across computers, so pastebinning is kinda weird
2010-01-06T05:35:00.000Z	adz	mkanyicy	basically it copied the whole path in the tar
2010-01-06T05:35:00.000Z	mkanyicy	adz	I understand, strange
2010-01-06T05:35:00.000Z	mkanyicy	adz	do this
2010-01-06T05:35:00.000Z	adz	mkanyicy	should I just cp the mysql directory (down the path) to /var/lib?
2010-01-06T05:36:00.000Z	mkanyicy	adz	"sudo mysql stop"
2010-01-06T05:36:00.000Z	mkanyicy	adz	"sudo service mysql stop"
2010-01-06T05:36:00.000Z	mkanyicy	adz	yes that's exactly what we are going to do
2010-01-06T05:37:00.000Z	mkanyicy	adz	go to that "/var/lib/media/bcf ... folder using cd
2010-01-06T05:37:00.000Z	mkanyicy	adz	go down until when you type ls there is mysql
2010-01-06T05:38:00.000Z	adz	mkanyicy	there
2010-01-06T05:38:00.000Z	mkanyicy	adz	then do this "sudo rm -rfv /var/lib/mysql && sudo cp -priv mysql /var/lib"
2010-01-06T05:39:00.000Z	adz	mkanyicy	done
2010-01-06T05:40:00.000Z	mkanyicy	adz	"sudo service mysql start"
2010-01-06T05:42:00.000Z	mkanyicy	adz	?
2010-01-06T05:42:00.000Z	mkanyicy	adz	are you winning?
2010-01-06T05:43:00.000Z	adz	mkanyicy	seemed to have dumped just fine, gonna just check through the file for some stuffs
2010-01-06T05:44:00.000Z	adz	mkanyicy	apparently gedit is not too expedient about loading 113 MB files :P
2010-01-06T05:44:00.000Z	mkanyicy	adz	my english is not good, what does expedient mean?
2010-01-06T05:44:00.000Z	adz	mkanyicy	fast, unless I'm using it wrong
2010-01-06T05:45:00.000Z	mkanyicy	adz	ok, i thought about the word ingredient
2010-01-06T05:46:00.000Z	mkanyicy	adz	ok I will leave it up to you to verify that the tar backup has all the files you want
2010-01-06T05:46:00.000Z	mkanyicy	adz	ok I will leave it up to you to verify that the tar backup has all mysql databases and tables with the data you want
2010-01-06T05:48:00.000Z	adz	mkanyicy	cool. it's still searching for a recent phrase, but by the db size it seems good. Thanks so much for your help!
